<h2>{{ 'workflow_template_edit_title' | translate }} <span *ngIf="workflowTemplate && workflowTemplate.id">{{workflowTemplate.name}}</span></h2>

<div *ngIf="workflowTemplate;then showWorkflowTemplate;else loadWorkflowTemplate"></div>
<ng-template #showWorkflowTemplate>
    <div id="WorkflowTemplateEdit">
        <form class="ui form">
            <div class="ui grid">
                <div class="sixteen wide column">
                    <div class="four fields">
                        <div class="field">
                            <label>{{'common_name' | translate}}</label>
                            <input class="ui input" type="text" name="name" [ngModel]="workflowTemplate.name"
                                [disabled]="true">
                        </div>
                        <div class="field">
                            <label>{{'common_group' | translate}}</label>
                            <input class="ui input" type="text" name="group" [ngModel]="workflowTemplate.group.name"
                                [disabled]="true">
                        </div>
                    </div>
                    <div class="field">
                        <label>{{'common_description' | translate}}</label>
                        <textarea name="description" [(ngModel)]="workflowTemplate.description" (ngModelChange)="descriptionChange()"
                            [rows]="descriptionRows"></textarea>
                    </div>
                    <div class="wide field">
                        <label>Workflow</label>
                        <codemirror name="workflow-value" [(ngModel)]="workflowValue" [config]="codeMirrorConfig"></codemirror>
                    </div>
                    <div class="wide field">
                        <label>Pipelines</label>
                        <div class="codeContainer field" *ngFor="let k of pipelineKeys">
                            <codemirror class="code" name="pipeline-value-{{k}}" [(ngModel)]="pipelineValues[k]"
                                [config]="codeMirrorConfig">
                            </codemirror>
                            <button class="codeButton ui icon red button" (click)="clickRemovePipeline(k)">
                                <i class="trash icon"></i>
                            </button>
                        </div>
                    </div>
                    <div class="wide field codeContainer">
                        <codemirror class="code" name="pipeline-value-add" [(ngModel)]="pipelineValueAdd" [config]="codeMirrorConfig"></codemirror>
                        <button class="codeButton ui icon green button" (click)="clickAddPipeline()">
                            <i class="plus icon"></i>
                        </button>
                    </div>
                    <div class="wide field">
                        <button class="ui green right floated button" [class.loading]="loading" (click)="clickSave()">
                            <i class="save icon"></i>{{ 'btn_save' | translate }}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</ng-template>
<ng-template #loadWorkflowTemplate>
    <div class="ui text active loader">{{ 'common_loading' |Â translate }}</div>
</ng-template>
